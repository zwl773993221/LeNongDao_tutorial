#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <pthread.h>
#include <signal.h>

#include "sample_comm.h"

#define  hz_height     16
#define hz_width        16
#define asc_heigth     16
#define asc_width       8
#define hz_font 1
#define asc_font 0

unsigned char  ASC_MSK[96*16] =
{
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // < 0x20时,打印此字
    /*--  文字:     --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  !  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00,

    /*--  文字:  "  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x12, 0x36, 0x24, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  #  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x24, 0x24, 0x24, 0xFE, 0x48, 0x48, 0x48, 0xFE, 0x48, 0x48, 0x48, 0x00, 0x00,

    /*--  文字:  $  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x10, 0x38, 0x54, 0x54, 0x50, 0x30, 0x18, 0x14, 0x14, 0x54, 0x54, 0x38, 0x10, 0x10,

    /*--  文字:  %  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x44, 0xA4, 0xA8, 0xA8, 0xA8, 0x54, 0x1A, 0x2A, 0x2A, 0x2A, 0x44, 0x00, 0x00,

    /*--  文字:  &  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x30, 0x48, 0x48, 0x48, 0x50, 0x6E, 0xA4, 0x94, 0x88, 0x89, 0x76, 0x00, 0x00,

    /*--  文字:  '  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x60, 0x60, 0x20, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  (  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x02, 0x04, 0x08, 0x08, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x08, 0x08, 0x04, 0x02, 0x00,

    /*--  文字:  )  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x40, 0x20, 0x10, 0x10, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x10, 0x10, 0x20, 0x40, 0x00,

    /*--  文字:  *  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0xD6, 0x38, 0x38, 0xD6, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  +  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x10, 0x10, 0xFE, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x00,

    /*--  文字:  ,  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x60, 0x20, 0xC0,

    /*--  文字:  -  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  .  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x60, 0x00, 0x00,

    /*--  文字:  /  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x01, 0x02, 0x02, 0x04, 0x04, 0x08, 0x08, 0x10, 0x10, 0x20, 0x20, 0x40, 0x40, 0x00,

    /*--  文字:  0  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x18, 0x24, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x24, 0x18, 0x00, 0x00,

    /*--  文字:  1  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x10, 0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x7C, 0x00, 0x00,

    /*--  文字:  2  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x42, 0x04, 0x04, 0x08, 0x10, 0x20, 0x42, 0x7E, 0x00, 0x00,

    /*--  文字:  3  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x04, 0x18, 0x04, 0x02, 0x02, 0x42, 0x44, 0x38, 0x00, 0x00,

    /*--  文字:  4  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x04, 0x0C, 0x14, 0x24, 0x24, 0x44, 0x44, 0x7E, 0x04, 0x04, 0x1E, 0x00, 0x00,

    /*--  文字:  5  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x7E, 0x40, 0x40, 0x40, 0x58, 0x64, 0x02, 0x02, 0x42, 0x44, 0x38, 0x00, 0x00,

    /*--  文字:  6  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x1C, 0x24, 0x40, 0x40, 0x58, 0x64, 0x42, 0x42, 0x42, 0x24, 0x18, 0x00, 0x00,

    /*--  文字:  7  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x7E, 0x44, 0x44, 0x08, 0x08, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00,

    /*--  文字:  8  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x42, 0x24, 0x18, 0x24, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00,

    /*--  文字:  9  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x18, 0x24, 0x42, 0x42, 0x42, 0x26, 0x1A, 0x02, 0x02, 0x24, 0x38, 0x00, 0x00,

    /*--  文字:  :  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00,

    /*--  文字:  ;  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x20,

    /*--  文字:  <  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x00, 0x00,

    /*--  文字:  =  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  >  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x00, 0x00,

    /*--  文字:  ?  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x62, 0x02, 0x04, 0x08, 0x08, 0x00, 0x18, 0x18, 0x00, 0x00,

    /*--  文字:  @  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x38, 0x44, 0x5A, 0xAA, 0xAA, 0xAA, 0xAA, 0xB4, 0x42, 0x44, 0x38, 0x00, 0x00,

    /*--  文字:  A  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x10, 0x10, 0x18, 0x28, 0x28, 0x24, 0x3C, 0x44, 0x42, 0x42, 0xE7, 0x00, 0x00,

    /*--  文字:  B  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xF8, 0x44, 0x44, 0x44, 0x78, 0x44, 0x42, 0x42, 0x42, 0x44, 0xF8, 0x00, 0x00,

    /*--  文字:  C  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3E, 0x42, 0x42, 0x80, 0x80, 0x80, 0x80, 0x80, 0x42, 0x44, 0x38, 0x00, 0x00,

    /*--  文字:  D  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xF8, 0x44, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x44, 0xF8, 0x00, 0x00,

    /*--  文字:  E  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xFC, 0x42, 0x48, 0x48, 0x78, 0x48, 0x48, 0x40, 0x42, 0x42, 0xFC, 0x00, 0x00,

    /*--  文字:  F  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xFC, 0x42, 0x48, 0x48, 0x78, 0x48, 0x48, 0x40, 0x40, 0x40, 0xE0, 0x00, 0x00,

    /*--  文字:  G  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3C, 0x44, 0x44, 0x80, 0x80, 0x80, 0x8E, 0x84, 0x44, 0x44, 0x38, 0x00, 0x00,

    /*--  文字:  H  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xE7, 0x42, 0x42, 0x42, 0x42, 0x7E, 0x42, 0x42, 0x42, 0x42, 0xE7, 0x00, 0x00,

    /*--  文字:  I  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x7C, 0x00, 0x00,

    /*--  文字:  J  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3E, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x88, 0xF0,

    /*--  文字:  K  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xEE, 0x44, 0x48, 0x50, 0x70, 0x50, 0x48, 0x48, 0x44, 0x44, 0xEE, 0x00, 0x00,

    /*--  文字:  L  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xE0, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x42, 0xFE, 0x00, 0x00,

    /*--  文字:  M  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xEE, 0x6C, 0x6C, 0x6C, 0x6C, 0x54, 0x54, 0x54, 0x54, 0x54, 0xD6, 0x00, 0x00,

    /*--  文字:  N  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xC7, 0x62, 0x62, 0x52, 0x52, 0x4A, 0x4A, 0x4A, 0x46, 0x46, 0xE2, 0x00, 0x00,

    /*--  文字:  O  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x38, 0x44, 0x82, 0x82, 0x82, 0x82, 0x82, 0x82, 0x82, 0x44, 0x38, 0x00, 0x00,

    /*--  文字:  P  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xFC, 0x42, 0x42, 0x42, 0x42, 0x7C, 0x40, 0x40, 0x40, 0x40, 0xE0, 0x00, 0x00,

    /*--  文字:  Q  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x38, 0x44, 0x82, 0x82, 0x82, 0x82, 0x82, 0xB2, 0xCA, 0x4C, 0x38, 0x06, 0x00,

    /*--  文字:  R  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xFC, 0x42, 0x42, 0x42, 0x7C, 0x48, 0x48, 0x44, 0x44, 0x42, 0xE3, 0x00, 0x00,

    /*--  文字:  S  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x3E, 0x42, 0x42, 0x40, 0x20, 0x18, 0x04, 0x02, 0x42, 0x42, 0x7C, 0x00, 0x00,

    /*--  文字:  T  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xFE, 0x92, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00, 0x00,

    /*--  文字:  U  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xE7, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00,

    /*--  文字:  V  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xE7, 0x42, 0x42, 0x44, 0x24, 0x24, 0x28, 0x28, 0x18, 0x10, 0x10, 0x00, 0x00,

    /*--  文字:  W  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xD6, 0x92, 0x92, 0x92, 0x92, 0xAA, 0xAA, 0x6C, 0x44, 0x44, 0x44, 0x00, 0x00,

    /*--  文字:  X  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xE7, 0x42, 0x24, 0x24, 0x18, 0x18, 0x18, 0x24, 0x24, 0x42, 0xE7, 0x00, 0x00,

    /*--  文字:  Y  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xEE, 0x44, 0x44, 0x28, 0x28, 0x10, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00, 0x00,

    /*--  文字:  Z  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x7E, 0x84, 0x04, 0x08, 0x08, 0x10, 0x20, 0x20, 0x42, 0x42, 0xFC, 0x00, 0x00,

    /*--  文字:  [  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x1E, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1E, 0x00,

    /*--  文字:  \  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x40, 0x40, 0x20, 0x20, 0x10, 0x10, 0x10, 0x08, 0x08, 0x04, 0x04, 0x04, 0x02, 0x02,

    /*--  文字:  ]  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x78, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x78, 0x00,

    /*--  文字:  ^  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x1C, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  _  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

    /*--  文字:  `  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x60, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    /*--  文字:  a  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x42, 0x1E, 0x22, 0x42, 0x42, 0x3F, 0x00, 0x00,

    /*--  文字:  b  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xC0, 0x40, 0x40, 0x40, 0x58, 0x64, 0x42, 0x42, 0x42, 0x64, 0x58, 0x00, 0x00,

    /*--  文字:  c  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x22, 0x40, 0x40, 0x40, 0x22, 0x1C, 0x00, 0x00,

    /*--  文字:  d  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x06, 0x02, 0x02, 0x02, 0x1E, 0x22, 0x42, 0x42, 0x42, 0x26, 0x1B, 0x00, 0x00,

    /*--  文字:  e  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x42, 0x7E, 0x40, 0x40, 0x42, 0x3C, 0x00, 0x00,

    /*--  文字:  f  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x0F, 0x11, 0x10, 0x10, 0x7E, 0x10, 0x10, 0x10, 0x10, 0x10, 0x7C, 0x00, 0x00,

    /*--  文字:  g  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x44, 0x44, 0x38, 0x40, 0x3C, 0x42, 0x42, 0x3C,

    /*--  文字:  h  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xC0, 0x40, 0x40, 0x40, 0x5C, 0x62, 0x42, 0x42, 0x42, 0x42, 0xE7, 0x00, 0x00,

    /*--  文字:  i  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x7C, 0x00, 0x00,

    /*--  文字:  j  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00, 0x00, 0x1C, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x44, 0x78,

    /*--  文字:  k  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0xC0, 0x40, 0x40, 0x40, 0x4E, 0x48, 0x50, 0x68, 0x48, 0x44, 0xEE, 0x00, 0x00,

    /*--  文字:  l  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x7C, 0x00, 0x00,

    /*--  文字:  m  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x49, 0x49, 0x49, 0x49, 0x49, 0xED, 0x00, 0x00,

    /*--  文字:  n  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xDC, 0x62, 0x42, 0x42, 0x42, 0x42, 0xE7, 0x00, 0x00,

    /*--  文字:  o  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00,

    /*--  文字:  p  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xD8, 0x64, 0x42, 0x42, 0x42, 0x44, 0x78, 0x40, 0xE0,

    /*--  文字:  q  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x22, 0x42, 0x42, 0x42, 0x22, 0x1E, 0x02, 0x07,

    /*--  文字:  r  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xEE, 0x32, 0x20, 0x20, 0x20, 0x20, 0xF8, 0x00, 0x00,

    /*--  文字:  s  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x42, 0x40, 0x3C, 0x02, 0x42, 0x7C, 0x00, 0x00,

    /*--  文字:  t  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x0C, 0x00, 0x00,

    /*--  文字:  u  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC6, 0x42, 0x42, 0x42, 0x42, 0x62, 0xDC, 0x00, 0x00,

    /*--  文字:  v  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE7, 0x42, 0x24, 0x24, 0x28, 0x10, 0x10, 0x00, 0x00,

    /*--  文字:  w  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xD7, 0x92, 0x92, 0xAA, 0xAA, 0x44, 0x44, 0x00, 0x00,

    /*--  文字:  x  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x6E, 0x24, 0x18, 0x18, 0x18, 0x24, 0x76, 0x00, 0x00,

    /*--  文字:  y  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE7, 0x42, 0x24, 0x24, 0x28, 0x18, 0x10, 0x10, 0xE0,

    /*--  文字:  z  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x44, 0x08, 0x10, 0x10, 0x22, 0x7E, 0x00, 0x00,

    /*--  文字:  {  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x03, 0x04, 0x04, 0x04, 0x04, 0x04, 0x08, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x03, 0x00,

    /*--  文字:  |  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,

    /*--  文字:  }  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x00, 0x60, 0x10, 0x10, 0x10, 0x10, 0x10, 0x08, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x60, 0x00,

    /*--  文字:  ~  --*/
    /*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
    0x30, 0x4C, 0x43, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
/**********************************************************************************
**
**
***********************************************************************************/
static  void getHzKCode(signed char *c, char buff[])
{
    unsigned char qh, wh;
    unsigned long offset;
    FILE *HZK;

    if((HZK = fopen("./hzk16", "rb")) == NULL)
    {
        printf("Can't open ./hzk16,Please add it?");
    }
    qh     = *(c) - 0xa0;
    wh     = *(c + 1) - 0xa0;
    offset = (94 * (qh - 1) + (wh - 1)) * 32L;
    fseek(HZK, offset, SEEK_SET);
    fread(buff, 32, 1, HZK);
    fclose(HZK);
}
/**********************************************************************************
**
**
***********************************************************************************/
static  void get_zimo(char *str, char *buffer)
{
//    printf("str=%s,buffer=%p\n",str,buffer);
    int len;
    int i = 0;
    char *p;
    signed  char c1, *str_;
    p = buffer;
    len = strlen(str);
    str_ = (signed    char *)str;
    while(i < len)
    {
        c1 = str_[i];
        if(c1 >= 0)//asiic
        {
            if(c1<0x20)
            {
                memset(p,0x00,16);
            }
            else
            {
                memcpy(p, &ASC_MSK[(c1-0x1f)*16], 16);
            }

            p = p + 16;
        }
        else
        {
            getHzKCode(&str_[i], p);
            p = p + 32;
            i++;
        }
        i++;
    }
}
/**********************************************************************************
**
**
***********************************************************************************/
static inline void do_blit(char *bitmap, char *origin, unsigned int BitbmpPix_X, int x, int y, int font)
{
    char *pixel;
    int row, col;
    int y_next = y;
    int j;
    if(font == hz_font)
    {
        for(row = 0; row < 16; row++)
        {
            pixel = origin + (BitbmpPix_X * 2 * (y_next)) + x;
            for(j = 0; j < 2; j++)
            {
                for(col = 0; col < 8; col++)
                {
                    if(bitmap[row*2+j] &(0x80 >> col))
                    {
                        pixel[(col+j*8)*2] = 0x7f;
                        pixel[(col+j*8)*2+1] = 0xff;
                    }
                    else
                    {
                        pixel[(col+j*8)*2] = 0x00;
                        pixel[(col+j*8)*2+1] = 0x00;
                    }
                }
            }
            y_next++; /* Next line in bitmap */
        }
    }
    else
    {
        for(row = 0; row < asc_heigth; row++)
        {
            pixel = origin + (BitbmpPix_X * 2 * (y_next)) + x;
            for(col = 0; col < asc_width; col++)
            {
                if(bitmap[row] &(0x80 >> col))
                {
                    pixel[col*2] = 0x7f;
                    pixel[col*2+1] = 0xff;
                }
                else
                {
                    pixel[col*2] = 0x00;
                    pixel[col*2+1] = 0x00;
                }
            }
            y_next++; /* Next line in bitmap */
        }
    }
}
/**********************************************************************************
**
**
***********************************************************************************/
static inline void lprint(char *origin, char *new_string, char *old_string, unsigned int BitbmpPix_X, int x, int y, char *buffer)
{
    signed  char *c = (signed  char *) new_string;
    int i;
    int x_, y_;
    int str_equ = 1;
    x_ = x;
    y_ = y;
    char *bitmap;
    int needCmp = 1;

    if(old_string == NULL)
    {
        needCmp = 0;
    }
//    printf("start get zimo\n");
    get_zimo(new_string, buffer);
//    printf("end get zimo\n");
    bitmap = buffer;
    for(i = 0; i < strlen(new_string); i++)
    {
        if(c[i] >= 0)
        {
            if(needCmp == 1)
            {
                str_equ = memcmp(&new_string[i], &old_string[i], 1);
                if(str_equ != 0)
                {
                    do_blit(bitmap, origin, BitbmpPix_X, x_, y_, asc_font);
                }
            }
            else
            {
                do_blit(bitmap, origin, BitbmpPix_X, x_, y_, asc_font);
            }
            bitmap += 16;
            x_ += 16;
        }
        else
        {
            if(needCmp)
            {
                str_equ = memcmp(&new_string[i], &old_string[i], 2);
                if(str_equ != 0)
                {
                    do_blit(bitmap, origin, BitbmpPix_X, x_, y_, hz_font);
                }
            }
            else
            {
                do_blit(bitmap, origin, BitbmpPix_X, x_, y_, hz_font);
            }
            bitmap += 32;
            x_ += 32;
            i++;
        }
    }
    //printf("lprint\n");
}
/***********************************************************************************************
**
**
***********************************************************************************************/
void osd_update(char *origin_addr, char *new_string, char *old_string, unsigned int BitbmpPix_X, int x, int y, char *buffer)
{
    lprint(origin_addr, new_string, old_string, BitbmpPix_X, x, y, buffer);
}


